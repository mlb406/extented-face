<!DOCTYPE html>
<html>
	<link rel="stylesheet" href="slate/dist/css/slate.css">
	<head>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
		<script src="slate/dist/js/slate.js"></script>
		<script>
			function getParams() {
				var min_markers = $("#min-markers").val();
				var hr_markers = $("#hr-markers").val();
				var themeColor = $("#theme-color").val();
				var dateOn = $("#date").val();
				var date;
				if (dateOn === true) {
					date = "1";
				} else {
					date = "0";
				}
				
				var options = {
					"min_markers": min_markers,
					"hr_markers": hr_markers,
					"theme": themeColor,
					"date": date
				};
				
				localStorage.setItem(1, JSON.stringify(options));
				
				document.location = "pebblejs://close#" + encodeURIComponent(JSON.stringify(options));
			}
			
			$(function() {
				if (localStorage.getItem(1)) {
					var options = JSON.parse(localStorage.getItem(1));
					$("#min-markers").val(options.min_markers);
					$("#hr_markers").val(options.hr_markers);
					$("#theme-color").val(options.theme);
					$("#date").val(options.date);
				}
				$("#submit").click(function() {
					getParams();
				});
			});
		</script>
	</head>
	<body>
		<div class="item-container">
			<div class="item-container-header">Options</div>
			<div class="item-container-content">
				<label class="item">
					Minute markers
					<select name="minute-markers" id="min-markers" dir="rtl" class="item-select">
						<option class="item-select-option" value="0">None</option>
						<option class="item-select-option" selected value="1">Lines</option>
						<option class="item-select-option"value="2">Circles</option>
					</select>
				</label>
				<label class="item">
					Hour markers
					<select name="hour-markers" id="hr-markers" dir="rtl" class="item-select">
						<option class="item-select-option" value="0">None</option>
						<option class="item-select-option" selected value="1">Lines</option>
					</select>
				</label>
				<label class="item">
					Theme color
					<input type="text" class="item-color item-color-normal" id="theme-color" value="#FF5500"> 
				</label>
				<label class="item">
					Date
					<input type="checkbox" class="item-toggle" id="date" checked>
				</label>
			</div>
			<div class="item-container-footer">
				Customisable options for the watchface.
			</div>
		</div>
		<div class="item-container">
			<div class="button-container">
				<input type="button" id="submit" class="item-button" value="SUBMIT">
			</div>
		</div>
		<div class="item-container">
			<div class="item-container-header">About</div>
			<div class="item-container-content">
				<div class="item">
					"Extended" watchface by Max Beckett<br>
					Updated 17/02/16<br>
					Email <a href="mailto:mlb406@gmail.com?subject=[Pebble App Msg]">mlb406@gmail.com</a>
				</div>
			</div>
		</div>
	</body>
</html>
